<!DOCTYPE html>
<html lang="<%= lang %>">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hellajay - Drummer & Sound Engineer</title>
  <link rel="stylesheet" href="/css/rakui.css">
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="navbar-container">
      <a href="#" class="navbar-brand">HELLAJAY</a>

      <!-- Desktop Navigation -->
      <ul class="nav-links hide-mobile">
        <li><a href="#about" class="nav-link"><%= t('nav.about', lang) %></a></li>
        <li><a href="#work" class="nav-link"><%= t('nav.work', lang) %></a></li>
        <li><a href="#contact" class="nav-link"><%= t('nav.contact', lang) %></a></li>
        <li>
          <select class="form-select language-selector" aria-label="Select language">
            <option value="en" <%= lang === 'en' ? 'selected' : '' %>>EN</option>
            <option value="fr" <%= lang === 'fr' ? 'selected' : '' %>>FR</option>
          </select>
        </li>
      </ul>

      <!-- Mobile Menu Toggle -->
      <button class="nav-toggle" popovertarget="mobile-menu" aria-label="Open menu">
        <span class="nav-toggle-icon">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu (Popover) -->
  <div id="mobile-menu" class="nav-mobile-menu" popover>
    <div class="nav-mobile-header">
      <span class="navbar-brand">HELLAJAY</span>
      <button class="nav-close" popovertarget="mobile-menu" popovertargetaction="hide" aria-label="Close menu">X</button>
    </div>
    <ul class="nav-mobile-links">
      <li><a href="#about" class="nav-mobile-link"><%= t('nav.about', lang) %></a></li>
      <li><a href="#work" class="nav-mobile-link"><%= t('nav.work', lang) %></a></li>
      <li><a href="#contact" class="nav-mobile-link"><%= t('nav.contact', lang) %></a></li>
      <li>
        <select class="form-select language-selector" aria-label="Select language">
          <option value="en" <%= lang === 'en' ? 'selected' : '' %>>English</option>
          <option value="fr" <%= lang === 'fr' ? 'selected' : '' %>>Francais</option>
        </select>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <main>

    <!-- About Section -->
    <section id="about" class="section">
      <div class="container">
        <h2><%= t('about.title', lang) %></h2>
        <div class="stack gap-lg items-start">
          <div class="flex-none">
            <img src="/data/images/profile.webp" alt="Hellajay" class="bio-photo">
          </div>
          <div class="flex-1">
            <p><%= t('about.bio', lang) %></p>
          </div>
        </div>
      </div>
    </section>

    <!-- My Work Section -->
    <section id="work" class="section bg-accent">
      <div class="container">
        <h2><%= t('work.title', lang) %></h2>
        <div class="audio-player-list">
          <% if (audioFiles && audioFiles.length > 0) { %>
            <% audioFiles.forEach(file => { %>
              <div class="audio-player" data-audio-url="<%= file.url %>">
                <div class="audio-player-header">
                  <span class="audio-track-title"><%= file.title %></span>
                  <span class="audio-time">
                    <span class="audio-current">0:00</span> / <span class="audio-duration">0:00</span>
                  </span>
                </div>
                <div class="audio-controls">
                  <button type="button" class="audio-play-btn" aria-label="<%= t('work.play', lang) %>" data-playing="false">
                    <span class="audio-icon-play">&#9654;</span>
                    <span class="audio-icon-pause">&#10074;&#10074;</span>
                  </button>
                </div>
                <div class="audio-waveform"></div>
              </div>
            <% }); %>
          <% } else { %>
            <div class="empty-state">
              <div class="empty-state-icon">&#9835;</div>
              <p class="empty-state-text"><%= t('work.placeholder', lang) %></p>
            </div>
          <% } %>
        </div>
      </div>
    </section>


    <!-- Contact Section -->
    <section id="contact" class="section">
      <div class="container">
        <h2><%= t('contact.title', lang) %></h2>
        <form id="contact-form" class="form form-wide">
          <div class="form-group">
            <label class="form-label form-label-required"><%= t('contact.email', lang) %></label>
            <input type="email"
                   class="form-input"
                   name="email"
                   required
                   placeholder="<%= t('contact.email', lang) %>">
          </div>

          <div class="form-group">
            <label class="form-label"><%= t('contact.bandName', lang) %></label>
            <input type="text"
                   class="form-input"
                   name="bandName"
                   placeholder="<%= t('contact.bandName', lang) %>">
          </div>

          <div class="form-group">
            <label class="form-label"><%= t('contact.numberOfSongs', lang) %></label>
            <input type="text"
                   class="form-input"
                   name="numberOfSongs"
                   placeholder="<%= t('contact.numberOfSongsPlaceholder', lang) %>">
          </div>

          <div class="form-group">
            <label class="form-label"><%= t('contact.links', lang) %></label>
            <input type="text"
                   class="form-input"
                   name="links"
                   placeholder="<%= t('contact.linksPlaceholder', lang) %>">
          </div>

          <div class="form-group">
            <label class="form-label"><%= t('contact.servicesLabel', lang) %></label>
            <label class="form-check">
              <input type="checkbox" class="form-check-input" name="services" value="editing">
              <span class="form-check-label"><%= t('contact.services.editing', lang) %></span>
            </label>
            <label class="form-check">
              <input type="checkbox" class="form-check-input" name="services" value="mixing">
              <span class="form-check-label"><%= t('contact.services.mixing', lang) %></span>
            </label>
            <label class="form-check">
              <input type="checkbox" class="form-check-input" name="services" value="mastering">
              <span class="form-check-label"><%= t('contact.services.mastering', lang) %></span>
            </label>
            <label class="form-check">
              <input type="checkbox" class="form-check-input" name="services" value="production">
              <span class="form-check-label"><%= t('contact.services.production', lang) %></span>
            </label>
            <label class="form-check">
              <input type="checkbox" class="form-check-input" name="services" value="midiDrums">
              <span class="form-check-label"><%= t('contact.services.midiDrums', lang) %></span>
            </label>
          </div>

          <div class="form-group">
            <label class="form-label form-label-required"><%= t('contact.message', lang) %></label>
            <textarea class="form-textarea"
                      name="message"
                      required
                      placeholder="<%= t('contact.message', lang) %>"></textarea>
          </div>

          <div class="form-group">
            <button type="submit" class="btn btn-primary">
              <%= t('contact.submit', lang) %>
            </button>
          </div>
        </form>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <p class="footer-text">&copy; 2025 Hellajay. <%= t('footer.rights', lang) %></p>
  </footer>

  <!-- Scripts -->
  <script src="https://unpkg.com/wavesurfer.js@7.12.1/dist/wavesurfer.min.js"
          integrity="sha384-kARVKFrjTrjXnTMsC0qhqgeHQ4Chgt+91aK2A3qnCheMOdqPmt1iV8StjFuAbjxM"
          crossorigin="anonymous"></script>
  <script>
    // Translations needed for client-side JavaScript
    window.messages = {
      success: "<%= t('contact.success', lang) %>",
      error: "<%= t('contact.error', lang) %>"
    };
  </script>
  <script src="/js/i18n.js"></script>
  <script src="/js/app.js"></script>
  <script src="/js/geometric-bg.js"></script>
  <script src="/js/audio-player.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      AudioPlayer.initAll();
    });
  </script>
</body>
</html>
